---
# Source: digitalhub/templates/database-postgresql-cluster.yaml
# SPDX-FileCopyrightText: Â© 2025 DSLab - Fondazione Bruno Kessler
#
# SPDX-License-Identifier: AGPL-3.0-or-later

apiVersion: "acid.zalan.do/v1"
kind: postgresql
metadata:
  name: database-postgres-cluster
spec:
  teamId: "digitalhub"
  volume:
    size: 8Gi
  numberOfInstances: 1
  users:
    digitalhubadmin:
    - superuser
    - createdb
  postgresql:
    version: "15"
  preparedDatabases:
    digitalhub:
      defaultUsers: true
      schemas:
        public:
          defaultUsers: true
      extensions:
        timescaledb: public
        postgis: public
        vector: public
  resources:
    limits:
      cpu: "2"
      memory: 2Gi
    requests:
      cpu: 512m
      memory: 1000Mi
